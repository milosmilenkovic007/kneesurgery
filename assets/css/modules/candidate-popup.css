:root{--cand-bg:#ffffff;--card:#fff;--muted:#6b7280;--text:#111827;--blue:#3b82f6;--border:#e5e7eb;--shadow:0 20px 70px rgba(15,23,42,.12);--shadow-sm:0 8px 28px rgba(15,23,42,.09);--radius-outer:28px;--radius:16px;--focus:0 0 0 3px rgba(59,130,246,.25)}

.hj-candidate{position:fixed;inset:0;z-index:999999;display:grid;place-items:center;overscroll-behavior:contain}
.hj-candidate[hidden]{display:none}
.hj-candidate [hidden]{display:none !important}
.hj-candidate .hj-cand-step:not(.is-active){display:none !important}
.hj-cand-overlay{position:absolute;inset:0;background:var(--cand-bg);z-index:0}
.hj-cand-dialog{position:relative;z-index:1;margin:0;width:100%;height:100dvh;min-height:100dvh;max-height:100dvh;background:var(--card);border-radius:0;box-shadow:none;padding:calc(18px + env(safe-area-inset-top)) 18px calc(18px + env(safe-area-inset-bottom));display:flex;flex-direction:column;justify-content:flex-start;align-items:center;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}
.hj-cand-close{position:absolute;top:calc(14px + env(safe-area-inset-top));right:16px;border:0;background:#eef4ff;color:var(--blue);font-size:22px;line-height:1;border-radius:10px;width:36px;height:36px;cursor:pointer;display:flex;align-items:center;justify-content:center}
.hj-cand-close:hover{filter:brightness(0.98)}
.hj-cand-progress{position:sticky;top:50px;display:grid;grid-template-columns:repeat(var(--cand-steps,8),1fr);gap:8px;width:100%;max-width:820px;margin:4px auto 18px;padding:0 12px;z-index:2}
.hj-cand-progress .seg{height:4px;border-radius:999px;background:#e7efff;transition:all .18s ease;opacity:.8}
.hj-cand-progress .seg.is-complete{background:#bfd7ff;opacity:1}
.hj-cand-progress .seg.is-active{background:var(--blue);height:6px;opacity:1;box-shadow:0 0 0 1px rgba(59,130,246,.18)}

.hj-cand-step{width:100%;max-width:780px;margin:0 auto}
.hj-cand-step[data-step="1"]{min-height:calc(100dvh - (18px + env(safe-area-inset-top)) - (18px + env(safe-area-inset-bottom)));display:flex;flex-direction:column;align-items:center;justify-content:center}
.hj-cand-step .brand{display:flex;justify-content:center;margin:10px 0 16px}
.hj-cand-step .brand img{max-height:56px;width:auto;display:block}
.hj-cand-step .title {
  margin: 0 0 10px;
  font-size: clamp(26px, 3.2vw, 38px);
  color: var(--text);
  text-align: center;
  font-family: 'Source Serif 4';
  letter-spacing: -.01em;
}
.hj-cand-step .sub{margin:0 auto 20px;color:var(--muted);text-align:center;max-width:760px}
.actions{display:flex;gap:12px;justify-content:center;margin-top:24px;width:100%}
.hj-cand-step[data-step="8"] .actions{margin-top:20px}
.btn-primary{background:var(--blue);color:#fff;border-radius:16px;padding:16px 32px;border:0;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;gap:8px;font-weight:600;font-size:16px;box-shadow:0 4px 14px rgba(59,130,246,.25);transition:all .2s ease;min-width:180px}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(59,130,246,.35)}
.btn-secondary{background:#fff;color:var(--text);border:1px solid var(--border);border-radius:14px;padding:14px 24px;cursor:pointer;font-weight:500;transition:all .2s ease;min-width:120px}
.btn-secondary:hover{border-color:var(--blue);color:var(--blue);transform:translateY(-1px)}
.btn-primary:focus,.btn-secondary:focus{outline:none;box-shadow:var(--focus)}

/* Step 2 */
.hj-cand-step[data-step="2"]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100dvh - (18px + env(safe-area-inset-top)) - (18px + env(safe-area-inset-bottom)))}
.hj-cand-step[data-step="2"]>.title,.hj-cand-step[data-step="2"]>.sub{max-width:600px}
.options{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:18px;margin:24px 0 20px;width:100%}
.opt{border:1px solid var(--border);background:#fff;border-radius:16px;overflow:hidden;cursor:pointer;padding:10px;display:flex;flex-direction:column;align-items:center;gap:12px;transition:transform .15s ease, box-shadow .2s ease, border-color .2s ease, background-color .2s ease, color .2s ease}
.opt:hover{transform:translateY(-2px);box-shadow:0 0 0 3px rgba(59,130,246,.18);border-color:var(--blue);background:#f0f6ff}
.opt:hover .lbl{color:var(--blue)}
.opt img{width:100%;height:200px;object-fit:cover;border-radius:12px;box-shadow:0 10px 28px rgba(15,23,42,.06)}
.opt .lbl{font-weight:600;color:var(--text);font-size:15px}
.opt.is-selected{border-color:var(--blue);box-shadow:0 0 0 3px rgba(59,130,246,.20)}

/* Description field */
.desc-section{margin:20px 0;width:100%}
.desc-field{display:flex;flex-direction:column;gap:10px}
.desc-lbl{font-weight:600;color:var(--text);font-size:15px;text-align:left}
.desc-input{border:1px solid var(--border);border-radius:14px;padding:14px 16px;font-size:15px;background:#fff;resize:vertical;min-height:100px;font-family:inherit;transition:border-color .2s ease, box-shadow .2s ease}
.desc-input:focus{outline:none;border-color:var(--blue);box-shadow:0 0 0 3px rgba(59,130,246,.15)}
.desc-input::placeholder{color:#9ca3af}

/* Step 6/7: Uploads */
.hj-cand-step[data-step="6"],
.hj-cand-step[data-step="7"]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100dvh - (18px + env(safe-area-inset-top)) - (18px + env(safe-area-inset-bottom)))}
.hj-cand-step[data-step="6"]>.title,.hj-cand-step[data-step="6"]>.sub,
.hj-cand-step[data-step="7"]>.title,.hj-cand-step[data-step="7"]>.sub{max-width:550px}
.uploads{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;margin:24px 0;width:100%;max-width:550px}
.uploads.uploads--single{grid-template-columns:1fr;max-width:420px}
.upload-cell{display:flex;flex-direction:column;gap:8px;min-width:0}
.drop-title{font-size:13px;color:var(--muted);text-align:center;font-weight:500}
.drop{position:relative;border:2px dashed var(--border);border-radius:14px;min-height:140px;display:flex;align-items:center;justify-content:center;color:var(--muted);background:#f9fafb;overflow:hidden;transition:border-color .2s ease, box-shadow .2s ease}
.drop::before{content:"";position:absolute;inset:0;background-image:var(--drop-cover);background-repeat:no-repeat;background-position:center;background-size:cover;opacity:.3;pointer-events:none}
.drop.has-preview::before{opacity:0}
.drop:hover{border-color:#cfe0ff;box-shadow:var(--shadow-sm)}
.drop.has-preview{border-style:solid;border-color:#dbe3f2}
.drop input{display:none}
.drop .controls{position:absolute;top:8px;right:8px;display:flex;gap:6px;z-index:2}
.drop .btn-ctrl{background:#eef4ff;border:1px solid var(--border);color:var(--blue);width:28px;height:28px;border-radius:8px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px}
.drop .btn-ctrl:hover{filter:brightness(0.97)}
.drop .cta{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);display:flex;align-items:center;justify-content:center;gap:10px;z-index:1}
.drop .btn-ghost{background:#fff;border:1px solid var(--border);color:var(--text);border-radius:8px;padding:6px;cursor:pointer;box-shadow:0 4px 14px rgba(15,23,42,.08)}
.drop .btn-ghost .ic{width:18px;height:18px;display:block}
.drop .btn-ghost:hover{border-color:var(--blue);color:var(--blue)}
.drop .cam{position:absolute;inset:0;background:#fff;display:none;flex-direction:column;align-items:center;justify-content:center;gap:10px;z-index:6}
.drop.cam-open .cam{display:flex}
.drop .cam video{width:100%;height:100%;object-fit:cover}
.drop .cam .cam-actions{position:absolute;bottom:calc(10px + env(safe-area-inset-bottom));left:50%;transform:translateX(-50%);display:flex;gap:10px}
.drop .cam .cam-ico{width:42px;height:42px;border-radius:999px;background:#fff;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 6px 16px rgba(15,23,42,.12)}
.drop .cam .cam-ico .ic{width:20px;height:20px;display:block}
.drop .cam .cam-ico.cam-snap{background:#eef4ff;border-color:#cfe0ff;color:var(--blue)}
.drop .cam .cam-ico.cam-cancel{background:#fff;border-color:#f1d2d2;color:#ef4444;font-size:20px;line-height:1}
.hint { display:none !important; }
.hj-error{color:#dc2626;text-align:center;margin:10px 0}

/* Upload progress bar */
.upload-progress{position:absolute;bottom:0;left:0;right:0;background:rgba(255,255,255,.95);padding:12px;display:flex;flex-direction:column;gap:6px;align-items:center;z-index:3;backdrop-filter:blur(4px)}
.upload-progress-bar{width:100%;height:6px;border-radius:999px;background:#e7efff;overflow:hidden;position:relative}
.upload-progress-bar::after{content:"";position:absolute;top:0;left:0;height:100%;width:0;background:var(--blue);border-radius:999px;transition:width .2s ease;box-shadow:0 0 8px rgba(59,130,246,.4)}
.upload-progress[data-percent]>.upload-progress-bar::after{width:attr(data-percent)}
.upload-progress-text{font-size:12px;color:var(--blue);font-weight:600}

/* Simple tooltips for controls */
.drop [data-tip]{position:relative}
.drop [data-tip]::after{content:attr(data-tip);position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:rgba(17,24,39,.9);color:#fff;font-size:10.5px;padding:4px 6px;border-radius:6px;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .15s;z-index:5}
.drop .controls [data-tip]::after{top:calc(100% + 6px);bottom:auto}
.drop [data-tip]:hover::after{opacity:1}
.hint--xray{display:block !important;font-size:12px;color:var(--muted);position:absolute;bottom:70px;left:50%;transform:translateX(-50%)}

/* X-ray same size as others */
.hj-candidate .drop[data-index="xray"]{min-height:140px}

/* Step 3/4/5: Medical section */
.hj-cand-step[data-step="3"],
.hj-cand-step[data-step="4"],
.hj-cand-step[data-step="5"]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100dvh - (18px + env(safe-area-inset-top)) - (18px + env(safe-area-inset-bottom)))}
.hj-cand-step[data-step="3"]>.title,.hj-cand-step[data-step="3"]>.sub,
.hj-cand-step[data-step="4"]>.title,.hj-cand-step[data-step="4"]>.sub,
.hj-cand-step[data-step="5"]>.title,.hj-cand-step[data-step="5"]>.sub{max-width:600px}
.med-section{margin:26px 0 10px;border-top:1px solid #eef2f7;padding-top:18px}
.med-title{margin:0 0 6px;text-align:center}
.med-sub{margin:0 0 16px;text-align:center;color:var(--muted)}
.med-grid{display:grid;grid-template-columns:1fr !important;gap:18px;width:100%;max-width:500px;margin:0 auto}
.mf-age{max-width:120px;margin:0 auto}
.med-field {
    display: flex;
    flex-direction: column;
    gap: 8px;
    border: unset;
    border-radius: 12px;
    padding: 5px;
    align-items: center;
}
.mf-lbl{font-weight:600;color:var(--text);font-size:15px}
.mf-row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.mf-row label{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border:1px solid var(--border);border-radius:999px;background:#fff;color:var(--text);cursor:pointer;transition:all .15s ease;font-size:15px}
.mf-row label:has(input:checked){border-color:var(--blue);color:var(--blue);box-shadow:0 0 0 3px rgba(59,130,246,.15)}
.mf-row input{accent-color:var(--blue)}
.mf-input{border:1px solid var(--border);border-radius:12px;padding:14px 12px;font-size:15px;background:#fff;width:100%;transition:border-color .2s ease, box-shadow .2s ease}
.mf-input:focus{outline:none;box-shadow:0 0 0 3px rgba(59,130,246,.15);border-color:var(--blue)}

/* Step 8: Booking / Fluent Form */
.hj-cand-step[data-step="8"]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100dvh - (18px + env(safe-area-inset-top)) - (18px + env(safe-area-inset-bottom)))}
.hj-cand-step[data-step="8"]>.title,.hj-cand-step[data-step="8"]>.sub{max-width:600px}
.ff-wrap{margin:24px 0;width:100%;max-width:600px}
.ff-wrap form{display:flex;flex-direction:column;gap:18px}
.ff-wrap .ff-el-group{margin-bottom:0 !important}
.ff-wrap label{font-weight:600;color:var(--text);font-size:15px;margin-bottom:8px;display:block}
.ff-wrap .ff-btn-submit{display:none !important}

/* Unified input styling inside popup */
.hj-candidate input[type=date],
.hj-candidate input[type=email],
.hj-candidate input[type=number],
.hj-candidate input[type=password],
.hj-candidate input[type=search],
.hj-candidate input[type=tel],
.hj-candidate input[type=text],
.hj-candidate input[type=url],
.hj-candidate select,
.hj-candidate textarea{
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px 16px;
  font-size:15px;
  transition:border-color .2s ease, box-shadow .2s ease;
  width:100%;
  background:#fff;
}
.hj-candidate input:focus,
.hj-candidate select:focus,
.hj-candidate textarea:focus{
  outline:none;
  border-color:var(--blue);
  box-shadow:0 0 0 3px rgba(59,130,246,.15);
}

/* Custom submit button in actions */
.hj-cand-step[data-step="8"] .actions{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:14px;
  margin-top:28px;
}

@media(max-width:900px){
  .hj-cand-dialog{margin:0;min-height:100dvh;height:100dvh;border-radius:0;padding:calc(16px + env(safe-area-inset-top)) 16px calc(16px + env(safe-area-inset-bottom))}
  .hj-cand-step{max-width:640px}
  .options,.uploads{grid-template-columns:1fr}
  .drop{min-height:200px}
  .med-grid{grid-template-columns:1fr}
}

/* Mobile-only tweaks (do not affect desktop) */
@media(max-width:640px){
  .hj-cand-step{max-width:520px}
  .hj-cand-progress {
    position: sticky;
    top: 20px;
    display: grid;
    grid-template-columns: repeat(var(--cand-steps, 8), 1fr);
    gap: 8px;
    width: 70%;
    max-width: 820px;
    margin: 4px auto 18px;
    padding: 0 12px;
    z-index: 2;
}
  .hj-cand-step .title{font-size:28px}
  /* Vertically center step 2 on small screens */
  .hj-cand-step[data-step="2"]{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    min-height:calc(100dvh - (16px + env(safe-area-inset-top)) - (16px + env(safe-area-inset-bottom)));
  }
  /* Step 2 + Step 3 action buttons centered on mobile */
  .hj-cand-step[data-step="2"] .actions,
  .hj-cand-step[data-step="3"] .actions,
  .hj-cand-step[data-step="4"] .actions,
  .hj-cand-step[data-step="5"] .actions{justify-content:center}

  /* Upload grid: two columns and smaller tiles */
      .uploads {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 12px;
        margin-top: 12px;
        max-width: 300px;
    }
  .upload-cell{min-width:0;gap:0}
  .uploads.uploads--single {
    grid-template-columns: 1fr;
    max-width: 320px!important;
}
  .drop{min-height:120px}
  .drop-title{font-size:13px}
  .drop .btn-ghost .ic{width:18px;height:14px}
  .drop .btn-ghost{padding:6px;border-radius:9px}
  /* Step 2 option cards smaller */
  .opt{padding:8px}
  .opt img{height:140px}
  .actions .btn-primary,.actions .btn-secondary{padding:12px 18px}

  /* Make X-ray tile span both columns with same height */
  .upload-cell:has(.drop[data-index="xray"]){grid-column:1 / -1}
  .drop[data-index="xray"]{min-height:100px!important}

  /* Step 4 (Fluent Form) mobile styling */
  .hj-cand-step[data-step="8"] .ff-wrap{max-width:320px;margin:0 auto}
  .hj-cand-step[data-step="8"] .ff-wrap input[type="text"],
  .hj-cand-step[data-step="8"] .ff-wrap input[type="email"],
  .hj-cand-step[data-step="8"] .ff-wrap input[type="tel"],
  .hj-cand-step[data-step="8"] .ff-wrap input[type="number"],
  .hj-cand-step[data-step="8"] .ff-wrap select,
  .hj-cand-step[data-step="8"] .ff-wrap textarea{padding:1rem 1rem}
  .hj-cand-step[data-step="8"] .ff-wrap .ff-default .ff_btn_style{border:1px solid transparent;border-radius:14px;cursor:pointer;display:inline-block;font-size:16px;font-weight:500;line-height:1.5;width:100%;padding:15px 20px;position:relative;margin-top:18px;text-align:center;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}
  .hj-cand-step[data-step="8"] .actions{justify-content:center}
  /* Ensure bottom spacing never hides buttons */
  .hj-cand-step .actions{margin-bottom:calc(8px + env(safe-area-inset-bottom))}
}

html.hj-cand-open{overflow:hidden}
